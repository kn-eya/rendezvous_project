{% extends "base.html" %}
{% block content %}

<h2 class="mb-4">ðŸ”” Notifications</h2>

<!-- Bouton marquer toutes comme lues -->
<form method="POST">
    {% csrf_token %}
    <button class="btn btn-primary mb-3" name="mark_all">Tout marquer comme lu</button>
</form>

<div class="list-group">
    {% for notif in notifications %}
        <div class="list-group-item d-flex justify-content-between align-items-center 
                    {% if not notif.is_read %}fw-bold{% endif %}">

            <div>
                <div><strong>{{ notif.title }}</strong></div>
                <small>{{ notif.message }}</small><br>
                <small class="text-muted">{{ notif.created_at }}</small>
            </div>

            {% if not notif.is_read %}
            <form method="POST" class="ms-3">
                {% csrf_token %}
                <input type="hidden" name="notif_id" value="{{ notif.id }}">
                <button class="btn btn-sm btn-outline-success" name="mark_one">
                    âœ” Lu
                </button>
            </form>
            {% endif %}
        </div>
    {% empty %}
        <p>Aucune notification.</p>
    {% endfor %}
</div>

{% endblock %}
